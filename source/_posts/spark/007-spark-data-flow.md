---
title: spark运行流程
tags:
  - spark
p: spark/007-spark-data-flow
date: 2019-09-14 20:57:08
---


# 通用流程

```s
       Unsaved       
+---------+               +--------------+         4.反向注册
|         |  1.任务提交    |              <-----------------------+
|  client +--------------->   Driver     |                       |
|         |               |              |                       |
+---------+               | 初 始 化 sc   |                    +--+----------+
                          | 任 务 划 分   |                    |             |
                          | 任 务 调 度   |                    |   Executor  |
                          +------+-------+                    |   执 行 任 务|
                                 |                            |   textFile  |
                                 |        +------------------>+   flatMap   |
                                 |        |  3.启动Executor    |   map       |
                        2.注册应用|        |                    |             |
                                 |        |                   +-------------+
                                 |        |
                                 |        |
                          +------v--------+
                          |               |                   +-------------+
                          |  资 源 管 理 器 +------------------->             |
                          |               |                   |  Executor   |
                          +---------------+                   |             |
                                                              +-------------+
```

# standalone运行模式

```s
                             Driver
                         +-------------------+                       +---------------------+
                         |                   |       1.register      |                     |
                         |    Client         +----------------------->                     |
      +------------------>                   |                       |                     |
      |                  |  +-------------+  |                       |    Master           |
      |                  |  |             |  |                       |                     |
      |                  |  |  SparkContext  |      7.destroy        |                     |
      |                  |  +-------------+  +----------------------->                     |
      |                  +-^-----------------+                       +-+---------------^---+
6.report task status       |           |                               |               |
until finished             |           |                               |               |
      |                    |           |                  2.apply      |               | 3.report the status
      |                    |           |                   for         |               |
      |               4.register       |                  resource     |               |
      |                    |           |                  boot         |               |
      |                    |           |                  ExecutorBackend              |
      |                    |           |                               |               |
      |                    |        5.distribute tasks                 |               |
      |                    |           |                               |               |
      |                    |           |                               |               |
      |                    |           |                               |               |
      |                 +--+-----------v-------+               +-------v---------------+------+
      |                 |                      |               |                              |
      +-----------------+      Worker          |               |        Worker                |
                        |                      |               |                              |
                        |  +-----------------+ |               | +------------+  +----------+ |
                        |  |                 | |               | |            |  |          | |
                        |  | executorA       | |               | | executorB  |  |executorC | |
                        |  +-----------------+ |               | +------------+  +----------+ |
                        +----------------------+               +------------------------------+
```

