---
title: 如何拆分微服务应用
tags:
  - microservice
p: basic/005-how-to-break-monolith-into-microservices
date: 2018-11-30 17:32:56
---

本文翻译自：[https://martinfowler.com/articles/break-monolith-into-microservices.html](https://martinfowler.com/articles/break-monolith-into-microservices.html)

# 什么时候解偶和，解什么

由于单一系统变得太大而无法应对，许多企业被迫将其分解为微服务架构风格。 这是一次有价值的旅程，但并不容易。 我们已经了解到，为了做到这一点，我们需要从简单的服务开始，然后提取基于垂直功能的服务，这些服务对业务很重要并且经常变化。 这些服务最初应该很大，并且最好不依赖于剩余的整体结构。 我们应确保每个迁移步骤都代表整体架构的原子改进。

将单片系统迁移到微服务生态系统是一个史诗般的旅程。踏上这一旅程的人们抱有诸如增加运营规模，加快变革步伐，避免高昂变革成本等愿望。他们希望增加团队数量，同时使他们能够并行地相互独立地交付价值。他们希望快速尝试其业务的核心功能并更快地实现价值。他们还希望避免与更改现有单片系统相关的高成本。

决定何时以及如何逐步迁移分离的能力是将整体分解为微服务生态系统的一些架构挑战。在这篇文章中，我分享了一些技术，可以指导交付团队 - 开发人员，架构师，技术经理 - 在整个过程中做出这些分解决策。

为了阐明这些技术，我使用了多层在线零售应用程序。该应用程序紧密结合面向用户，业务逻辑和数据层。我之所以选择这个例子，是因为它的架构具有许多企业运行的单片应用程序的特性，而且它的技术堆栈足够现代，可以证明分解是合理的，而不是完全重写和替换。

# 微服务生态系统目的地
在开始之前，每个人都对微服务生态系统有共同的理解是至关重要的。 微服务生态系统是一个服务平台，每个服务都封装了业务能力。 业务功能表示企业在特定域中执行的目标和职责。 每个微服务都公开了一个API，开发人员可以以自助方式发现和使用它。 微服务具有独立的生命周期。 开发人员可以独立构建，测试和发布每个微服务。 微服务生态系统强制执行自主长期团队的组织结构，每个团队负责一个或多个服务。 与微服务中的一般感知和“微观”相反，每项服务的规模最小，并且可能根据组织的运营成熟度而变化。 正如Martin Fowler所说，“微服务是标签，而不是描述”。

图1
{% asset_img 000.svg %}

# 旅程指南
在深入了解指南之前，重要的是要知道将现有系统分解为微服务会产生很高的总体成本，并且可能需要多次迭代。 开发人员和架构师必须仔细评估现有巨型组件的分解是否是正确的路径，以及微服务本身是否是[正确的目的地](https://martinfowler.com/articles/microservice-trade-offs.html)。 搞清楚这些后，让我们开始指南。

## 简单和分离能力的热身
走上微服务这条路，需要最低级别的操作准备。它需要按需访问部署环境，构建新的连续交付管道以独立构建，测试和部署可执行服务，以及保护，调试和监视分布式体系结构的能力。

无论我们是在构建新的服务还是分解现有系统，都需要运营准备就绪。有关此操作准备情况的更多信息，请参阅[Martin Fowler关于微服务先决条件](https://martinfowler.com/bliki/MicroservicePrerequisites.html)的文章。好消息是，自Martin发表文章以来，运行微服务架构的技术发展迅速。这包括创建Service Mesh，一个专用的基础架构层，用于运行快速，可靠和安全的微服务网络，容器编排系统，以提供更高级别的部署基础架构抽象，以及持续交付系统（如GoCD）的演进，以构建，测试和部署微服务作为容器。




